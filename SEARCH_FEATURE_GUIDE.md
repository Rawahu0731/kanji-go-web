# 検索機能の使い方ガイド

## 実装した機能

漢字勉強サイトに以下の2つの検索機能を追加しました：

### 1. 送り仮名検索
- 漢字の送り仮名（赤く表示される部分）で検索できます
- 例：「しい」で検索すると「あや**'しい'**」「ただ**'しい'**」などが見つかります
- 読み方の中で'で囲まれた部分だけが検索対象になります

### 構成要素検索
1. CSVに以下のように入力:
   ```csv
   images/炎.png,ほのお,,火 火
   images/峠.png,とうげ,,山 上 下
   ```
2. 検索モードで「構成要素検索」を選択
3. `火` で検索 → 炎がヒット
4. `山` で検索 → 峠がヒット
5. `上` で検索 → 峠がヒット（2つ目以降の要素でも検索可能！）

## データの入力方法

### CSVファイルに構成要素の列を追加する

構成要素のデータは、CSVファイルに新しい列 `components` を追加して管理します。

#### 手順：

1. **CSVファイルを開く**
   - `/workspaces/kanji-go-web/public/kanji/level-7/mappings.csv`
   - または `/workspaces/kanji-go-web/public/kanji/level-8/mappings.csv`

2. **ヘッダー行に `components` 列を追加**

   **変更前：**
   ```csv
   path,reading,additional_info
   ```

   **変更後：**
   ```csv
   path,reading,additional_info,components
   ```

3. **各行に構成要素を入力**

   **例：**
   ```csv
   path,reading,additional_info,components
   images/1_あやしい.png,あや'しい',,
   images/炎.png,ほのお,,火 火
   images/森.png,もり,,木 木 木
   images/畑.png,はたけ,,火 田
   images/峠.png,とうげ,,山 上 下
   images/明.png,あかるい,,日 月
   ```

4. **構成要素の入力ルール**
   - 複数の要素は**スペース**で区切る（例：`火 火` or `山 上 下`）
   - 全角・半角スペースどちらでもOK
   - 要素の順番は問いません
   - ひらがな、カタカナ、漢字すべて使用可能
   - 空欄でもOK（検索対象にならないだけ）
   - **検索時は各要素が個別に検索されます**（例：`火 火`の場合、`火`で検索すればヒットします）

#### 実際の入力例：

炎という漢字の場合：
```csv
images/炎.png,ほのお,,火 火
```

峠という漢字の場合：
```csv
images/峠.png,とうげ,,山 上 下
```

鬱という漢字の場合（複雑な漢字も対応）：
```csv
images/鬱.png,うつ,,木 缶 鬯
```

### Excelで編集する場合

1. CSVファイルをExcelで開く
2. D列（components列）を追加
3. 各行に構成要素を入力（**スペース区切りで**）
4. **重要**: CSV形式（カンマ区切り）で保存する

### テキストエディタで編集する場合

1. VS CodeなどでCSVファイルを開く
2. ヘッダー行に `,components` を追加
3. 各データ行の末尾に `,構成要素1 構成要素2 ...` を追加（**スペース区切りで**）
4. 保存

## 使い方

1. **サイトのページで「検索モード」を選択**
   - 「送り仮名検索」または「構成要素検索」を選択

2. **検索ボックスに入力**
   - 送り仮名検索：ひらがなで送り仮名を入力（例：`しい`）
   - 構成要素検索：漢字や部首で入力（例：`火`）

3. **結果が自動的にフィルタリングされます**
   - 送り仮名検索：'しい'を含む漢字（例：あや'しい'、ただ'しい'）が表示されます
   - 構成要素検索：指定した要素を含む漢字が表示されます

4. **検索をクリアする場合**
   - 「検索クリア」ボタンをクリック
   - または検索ボックスを空にする

## 注意事項

- CSVファイルを編集した後は、ブラウザをリロード（F5）してください
- components列が空の漢字は構成要素検索の対象になりません
- ジャンルフィルターと検索は併用できます
- 問題モードでは検索機能は使用できません（一覧モードのみ）

## サンプルデータ

以下は、いくつかの漢字の構成要素の例です：

| 漢字 | 構成要素の例 |
|------|-------------|
| 炎   | 火 火       |
| 森   | 木 木 木    |
| 畑   | 火 田       |
| 峠   | 山 上 下    |
| 明   | 日 月       |
| 休   | 人 木       |
| 好   | 女 子       |
| 鮎   | 魚 占       |

自分が覚えやすい分解方法で入力してください！
