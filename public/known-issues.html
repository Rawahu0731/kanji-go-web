<!doctype html>
<html lang="ja">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>既知の不具合 - 漢字勉強サイト</title>
    <style>
      body { font-family: Inter, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial; background: #fff; color:#222; margin:0; padding:2rem; }
      .container { max-width:900px; margin:0 auto; }
      h1 { font-size:1.8rem; margin-bottom:1rem; color:#ff6b6b; }
      time { color:#6b6f85; font-size:0.95rem; }
      h2 { font-size:1.15rem; margin-top:1.2rem; color:#222; }
      ul { margin:0.6rem 0 1.2rem 1.2rem; color:#333; }
      li { margin-bottom:0.5rem; }
      .back { display:inline-block; margin-top:1.6rem; padding:0.6rem 1rem; background:#fff; border:1px solid #eef0f6; border-radius:8px; box-shadow:0 6px 16px rgba(30,30,60,0.04); text-decoration:none; color:#222; }
      .meta { margin-bottom:1rem; color:#666; }
      .section { margin-bottom:1rem; padding-bottom:0.6rem; border-bottom:1px solid #f0f0f4; }
      .status { display: inline-block; padding: 4px 10px; border-radius: 6px; font-size: 0.9rem; font-weight: 600; margin-left: 8px; }
      .status.open { background: #ffe0e0; color: #d9534f; }
      .status.fixed { background: #d4edda; color: #28a745; }
      .status.investigating { background: #fff3cd; color: #856404; }
    </style>
  </head>
  <body>
    <div class="container">
      <h1>既知の不具合</h1>
      <p class="meta">このページでは現在確認されている不具合と対応状況を掲載しています。</p>

      <section class="section">
        <h2>現在報告されている不具合</h2>
        <ul>
          <li>
            <strong>デプロイ後に送り仮名や追加情報が表示されない</strong>
            <span class="status fixed">修正済み (v0.3.2)</span>
            <p style="margin:0.3rem 0 0 0; color:#666; font-size:0.95rem;">
              <strong>報告日:</strong> 2025-11-05<br />
              <strong>修正日:</strong> 2025-11-05<br />
              <strong>症状:</strong> データを更新してデプロイしても、送り仮名や追加情報などの最新データが反映されず、古いデータが表示される。<br />
              <strong>原因:</strong> Service Worker（キャッシュ機能）がCSVファイルもキャッシュ対象にしていたため、更新されたCSVファイルが読み込まれていませんでした。<br />
              <strong>修正内容:</strong> CSVファイルをキャッシュ対象から除外し、常にネットワークから最新版を取得するように変更しました。画像のみをキャッシュすることで、高速化を維持しつつデータの最新性を確保します。<br />
              <strong>対処方法:</strong> ブラウザで強制リロード（Ctrl + Shift + R / Cmd + Shift + R）を実行してください。または、開発者ツールからキャッシュをクリアしてください。
            </p>
          </li>
        </ul>
      </section>

      <section class="section">
        <h2>修正済みの不具合</h2>
        <ul>
          <li>
            <strong>四択クイズで正解の選択肢を選んでも不正解と判定される</strong>
            <span class="status fixed">修正済み (v0.3.1)</span>
            <p style="margin:0.3rem 0 0 0; color:#666; font-size:0.95rem;">
              <strong>報告日:</strong> 2025-10-31<br />
              <strong>修正日:</strong> 2025-10-31<br />
              <strong>状況:</strong> 四択形式の問題で正しい選択肢を選択しても、不正解として扱われることがありました。<br />
              <strong>原因:</strong> 正解の読みに「、」が含まれている場合、文字列比較で一致しないことがありました。<br />
              <strong>修正内容:</strong> 選択肢のインデックス（位置）で正解判定するように変更しました。
            </p>
          </li>
        </ul>
      </section>

      <section class="section">
        <h2>不具合を見つけた場合</h2>
        <p>不具合を発見された場合は、以下の情報を添えてご報告ください：</p>
        <ul>
          <li>発生した状況（どの機能を使っているときか）</li>
          <li>ブラウザの種類とバージョン</li>
          <li>エラーメッセージ（表示されている場合）</li>
          <li>再現手順（可能であれば）</li>
        </ul>
      </section>

      <a class="back" href="/">← サイトに戻る</a>
    </div>
  </body>
</html>
