<!doctype html>
<html lang="ja">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>アップデート履歴 - 漢字勉強サイト</title>
    <style>
      body { font-family: Inter, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial; background: #fff; color:#222; margin:0; padding:2rem; }
      .container { max-width:900px; margin:0 auto; }
      h1 { font-size:1.8rem; margin-bottom:1rem; color:#4756e6; }
      time { color:#6b6f85; font-size:0.95rem; }
      h2 { font-size:1.15rem; margin-top:1.2rem; color:#222; }
      ul { margin:0.6rem 0 1.2rem 1.2rem; color:#333; }
      li { margin-bottom:0.5rem; }
      .back { display:inline-block; margin-top:1.6rem; padding:0.6rem 1rem; background:#fff; border:1px solid #eef0f6; border-radius:8px; box-shadow:0 6px 16px rgba(30,30,60,0.04); text-decoration:none; color:#222; }
      .meta { margin-bottom:1rem; color:#666; }
      .section { margin-bottom:1rem; padding-bottom:0.6rem; border-bottom:1px solid #f0f0f4; }
    </style>
  </head>
  <body>
    <div class="container">
      <h1>アップデート履歴（パッチノート）</h1>
      <p class="meta">このページではサイトの主要な更新内容を時系列で記録しています。</p>

      <section class="section">
        <h2>2025-11-20 — v2.4.0 ⌨️ 操作性改善アップデート</h2>
        <time>公開日: 2025-11-20</time>
        <ul>
          <li><strong>ランキング順位の修正</strong>：自分のランキングが常に最下位として表示されていたバグを修正。正確な順位が表示されるようになりました。</li>
          <li><strong>Enterキー操作の改善</strong>：問題モードでのEnterキー操作を大幅に改善しました。
            <ul>
              <li>解答入力後、1回目のEnterキーで解答チェック（正解/不正解を表示）</li>
              <li>2回目のEnterキーで次の問題へ自動遷移</li>
              <li>入力が空の状態でEnterキーを押すと「あきらめる」処理を実行</li>
            </ul>
          </li>
          <li><strong>自動フォーカス機能</strong>：問題が表示されたら自動的に入力欄にフォーカスが当たり、すぐにキーボードで入力できるようになりました。次の問題に進んだ際も自動でフォーカスされます。</li>
          <li><strong>キーボード操作の統一</strong>：入力形式・四択形式の両方で、Enterキーによるスムーズな問題進行が可能になりました。</li>
        </ul>
      </section>

      <section class="section">
        <h2>2025-11-19 — v2.3.0 🔥 Firebase連携＆ランキング機能</h2>
        <time>公開日: 2025-11-19</time>
        <ul>
          <li><strong>Google認証ログイン</strong>：Googleアカウントでログイン可能に。ヘッダーに「Googleでログイン」ボタンを追加。</li>
          <li><strong>クラウドデータ同期</strong>：ログイン中はFirestoreに自動保存。複数端末でデータを共有できます。</li>
          <li><strong>グローバルランキング</strong>：全プレイヤーの累計XPランキングを表示。上位100位まで確認可能。</li>
          <li><strong>ランキングページ</strong>：「🏆 ランキング」ページを新設。自分の順位がハイライト表示されます。</li>
          <li><strong>トップ3表彰</strong>：1位🥇、2位🥈、3位🥉のメダル表示。</li>
          <li><strong>リアルタイム更新</strong>：ランキングは5秒ごとに自動更新。常に最新の順位を表示。</li>
          <li><strong>AuthButton コンポーネント</strong>：ログイン状態を視覚的に表示。ユーザーアイコンとログアウトボタン。</li>
          <li><strong>オフライン対応</strong>：Firebase未設定でもローカルストレージで通常通り動作。</li>
          <li><strong>セキュリティルール</strong>：Firestoreで適切なアクセス制御を実装。本人のデータのみ編集可能。</li>
          <li><strong>データ移行システム</strong>：既存のローカルデータをFirebaseに自動移行。</li>
        </ul>
      </section>

      <section class="section">
        <h2>2025-11-19 — v2.2.0 ⭐ キャラクターシステム実装</h2>
        <time>公開日: 2025-11-19</time>
        <ul>
          <li><strong>キャラクターガチャシステム</strong>：ブーストアイテムを廃止し、15種類のキャラクターガチャを実装。4つのレアリティ（コモン60%、レア30%、エピック9%、レジェンダリー1%）。</li>
          <li><strong>キャラクター効果</strong>：XPブースト、コインブースト、両方ブーストの3種類。装備することで効果を発揮。</li>
          <li><strong>重複システム</strong>：同じキャラクターを引くとレベルと重複カウントが増加。重複数は「+n」で表示。</li>
          <li><strong>キャラクター育成システム</strong>：クイズ正解でキャラクターに経験値を付与。最大Lv.100まで成長可能。入力形式で20 XP、四択形式で5 XP獲得。</li>
          <li><strong>レベルアップボーナス</strong>：キャラクターのレベルが上がると効果が2%ずつ増加（Lv.1: 基本値、Lv.2: +2%、Lv.3: +4%...）。</li>
          <li><strong>キャラクター専用ページ</strong>：装備中のキャラクターと所持キャラクター一覧を管理する専用ページを追加。レアリティ順→レベル順でソート。</li>
          <li><strong>キャラクター装備機能</strong>：クリックで装備/解除が可能。装備中のキャラクターにはチェックマークを表示。</li>
          <li><strong>経験値進捗表示</strong>：各キャラクターの現在XPと次のレベルまでの必要XPを表示。</li>
          <li><strong>キャラクターレベルアップ通知</strong>：レベルアップ時にキャラクターアイコンと新レベルを表示する専用通知。</li>
          <li><strong>報酬バランス調整</strong>：入力形式（XP150/コイン100）と四択形式（XP50/コイン30）で報酬を差別化。</li>
          <li><strong>問題再抽選機能</strong>：クイズ形式を切り替えた際に問題を自動で再抽選。</li>
          <li><strong>ナビゲーション改善</strong>：メインページに「⭐ キャラクター」リンクを追加。プロフィールページからキャラクター管理へのリンクを設置。</li>
        </ul>
      </section>

      <section class="section">
        <h2>2025-11-18 — v2.1.0 🎴 ガチャシステム＆デザイン刷新</h2>
        <time>公開日: 2025-11-18</time>
        <ul>
          <li><strong>常用漢字カードコレクション</strong>：全2,136枚の常用漢字カードを実装。各カードにレアリティ（Common, Rare, Epic, Legendary）を設定。</li>
          <li><strong>ガチャシステム</strong>：ショップでカードパックを購入し、ランダムで漢字カードを獲得できます。レアリティに応じた確率で排出。</li>
          <li><strong>カードコレクションページ</strong>：獲得したカードを閲覧できる専用ページを追加。未所持カードはシルエット表示。「所持カード」「全カード」の切り替え機能付き。</li>
          <li><strong>重複カード検出</strong>：既に所持しているカードを開封した場合、「重複」バッジを表示。コレクション画面でも所持枚数を確認可能。</li>
          <li><strong>サイト全体デザイン刷新</strong>：白を基調としたモダンなデザインに統一。グラデーション・カラフルな装飾を廃止し、シンプルで洗練されたUIに。</li>
          <li><strong>ショップUI改善</strong>：アイテムカードのレイアウトを整理し、購入ボタンの視認性を向上。カテゴリフィルターを中央配置。</li>
          <li><strong>プロフィールページ刷新</strong>：バッジ・統計情報のレイアウトを改善。白背景にグレーボーダーのクリーンなカードデザイン。</li>
          <li><strong>カード開封演出改善</strong>：開封結果の表示をFlexboxレイアウトに変更し、カードが中央に整列して表示されるように改善。</li>
        </ul>
      </section>

      <section class="section">
        <h2>2025-11-17 — v2.0.0 🎮 大型アップデート：ゲーミフィケーション実装</h2>
        <time>公開日: 2025-11-17</time>
        <ul>
          <li><strong>経験値（XP）＆レベルシステム</strong>：クイズ正解で+10 XP、+5コイン獲得。レベルアップ時には画面中央に通知が表示されます。</li>
          <li><strong>バッジシステム</strong>：12種類のバッジを実装。クイズ正解数、連続正解、レベル到達などで自動アンロック。獲得時は右上に通知ポップアップ。</li>
          <li><strong>統計トラッキング</strong>：総クイズ数、正答数、不正解数、現在の連勝記録、最高連勝記録を自動記録。</li>
          <li><strong>プロフィールページ</strong>：レベル・XP進捗バー、統計情報、バッジコレクション、正答率を一覧表示。</li>
          <li><strong>ショップ機能</strong>：コインで購入可能なアイテムを追加（テーマ4種、アイコン3種、XPブースト）。購入後は自動適用。</li>
          <li><strong>ストーリーモード完全リニューアル</strong>：「漢字迷宮の守護者」ストーリーを実装。蒼真と智の8章構成の冒険。各章にイラストとグラデーション背景を追加。</li>
          <li><strong>ストーリー報酬システム</strong>：章完了でXP、コイン、バッジを獲得。報酬獲得時はアニメーション演出付き。</li>
          <li><strong>グローバルヘッダー</strong>：全ページでレベル、XP進捗バー、コインを表示。プロフィール、ショップ、ストーリーへのナビゲーション追加。</li>
          <li><strong>リアルタイム通知</strong>：レベルアップ、バッジ獲得、報酬取得時にアニメーション付き通知を表示。</li>
          <li><strong>データ永続化</strong>：全てのゲーミフィケーションデータはlocalStorageに保存され、ブラウザを閉じても保持されます。</li>
        </ul>
      </section>

      <section class="section">
        <h2>2025-11-07 — v1.2.0 🔍</h2>
        <time>公開日: 2025-11-07</time>
        <ul>
          <li><strong>検索機能を実装</strong>：漢字を様々な条件で検索できるようになりました。</li>
          <li><strong>送り仮名検索</strong>：読み方の送り仮名（赤く表示される部分）で検索できます。例：「しい」で検索すると「あや'しい'」「ただ'しい'」などが見つかります。</li>
          <li><strong>構成要素検索</strong>：漢字を構成する部品（偏や旁など）で検索できます。CSVに構成要素を登録することで、複雑な漢字を部品から探せるようになりました。</li>
          <li><strong>検索モード切り替え</strong>：「すべて」「送り仮名検索」「構成要素検索」の3つのモードを選択できます。</li>
          <li><strong>リアルタイム検索</strong>：入力と同時に検索結果が更新され、該当する漢字の数がヘッダーに表示されます。</li>
        </ul>
      </section>

      <section class="section">
        <h2>2025-11-06 — v1.1.0</h2>
        <time>公開日: 2025-11-06</time>
        <ul>
          <li><strong>ジャンル絞り込みに「ジャンルなし」を追加</strong>：ドロップダウンに「ジャンルなし」オプションを追加しました。追加情報が空の項目（ジャンル未設定の漢字）だけを表示できます。</li>
          <li><strong>フィルタリングロジックの修正</strong>：従来はジャンル名が含まれるかで判定していましたが、今回の修正で「ジャンルなし」選択時は追加情報が空白のものを正しく抽出できるようになりました。</li>
          <li><strong>関連ファイル</strong>：`src/App.tsx` を更新しました（ジャンルリストに "ジャンルなし" を追加し、フィルタ条件を調整）。</li>
          <li>ユーザーインターフェース: ドロップダウンに新オプションが表示され、選択すると該当項目数がヘッダーに反映されます。</li>
        </ul>
      </section>

      <section class="section">
        <h2>2025-11-05 — v1.0.0 🎉</h2>
        <time>公開日: 2025-11-05</time>
        <ul>
          <li><strong>送り仮名機能を実装</strong>：読み方に含まれる送り仮名（''で囲まれた部分）を赤色で表示するようになりました。</li>
          <li><strong>問題モードの送り仮名対応</strong>：入力形式では送り仮名を除いた部分（''の外側）が合っていれば正解と判定されるようになりました。</li>
          <li><strong>四択形式の改善</strong>：選択肢には送り仮名を除いた部分のみが表示されるようになり、より適切な難易度になりました。</li>
          <li><strong>追加情報表示機能</strong>：各漢字に付随する追加情報（文字数指定、音読み指定など）がカード下に表示されるようになりました。</li>
          <li><strong>ジャンル分類システムの導入</strong>：全17ジャンル（動物、植物・藻類、地名・建造物、人名、スラング、飲食、単位、演目・外題、則天文字、チュノム、元素、嘘字、簡体字、文学の漢字、字義未詳、西夏文字）を実装しました。</li>
          <li><strong>ジャンル絞り込み機能</strong>：ドロップダウンメニューから特定のジャンルを選択して、該当する漢字のみを表示できるようになりました。</li>
          <li><strong>カードレイアウトの改善</strong>：追加情報専用のスペースを確保し、画像と重ならないように配置を最適化しました。</li>
          <li><strong>問題モードでの読み方表示</strong>：正解時・不正解時の両方で、送り仮名を赤色で強調表示した読み方が表示されるようになりました。</li>
        </ul>
      </section>

      <section class="section">
        <h2>2025-10-31 — v0.3.0</h2>
        <time>公開日: 2025-10-31</time>
        <ul>
          <li><strong>問題形式選択機能を追加</strong>：問題モードで「入力形式」と「四択形式」を選べるようになりました。</li>
          <li>四択形式：4つの選択肢から選ぶと自動で答え合わせが行われます。正解は緑、不正解は赤で表示されます。</li>
          <li>入力形式：従来通り自分で読みを入力して解答できます。</li>
          <li>問題中でも形式を切り替え可能です。</li>
        </ul>
      </section>

      <section class="section">
        <h2>2025-10-29 — v0.2.0</h2>
        <time>公開日: 2025-10-29</time>
        <ul>
          <li><strong>単語帳モードを追加</strong>：一覧で読みを隠してカードをクリックすると読みが表示されます（ON/OFF トグルあり）。</li>
          <li><strong>白背景デザインを適用</strong>：全体を白背景に調整しつつ、カードに微妙なシャドウとグラデーションを付与しました。</li>
          <li><strong>サービスワーカーを導入</strong>：画像のキャッシュを行い、再読み込み時の負荷を軽減します（Cache-first 戦略）。</li>
          <li><strong>免責事項ページを追加</strong>（<a href="/disclaimer.html">免責事項</a>）。</li>
          <li><strong>パッチノートページを追加</strong>（このページです）。</li>
        </ul>
      </section>

      <section class="section">
        <h2>2025-10-27 — v0.1.0</h2>
        <time>公開日: 2025-10-27</time>
        <ul>
          <li>初期リリース: レベル7の漢字一覧表示と問題モード（シャッフル出題）を実装。</li>
          <li>CSV からのデータ読み込みと画像表示に対応。</li>
        </ul>
      </section>

      <a class="back" href="/">← サイトに戻る</a>
    </div>
  </body>
</html>
